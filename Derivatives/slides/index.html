<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<style>
			.reveal h2 {
				text-transform: none;
			}
		</style>

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/monokai.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-markdown>
					<textarea data-template>
						# Derivative Works in Computer Science
						## Brian Howard, DePauw University
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## Overview
					* Numeric and Symbolic Differentiation
					* Dual Numbers and Backpropagation
					* Lexing and Parsing
					* Types and Zippers
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## Numeric Differentiation
					`$$
						Df(a) =
						\lim_{\epsilon\rightarrow 0}\frac{f(a + \epsilon) - f(a)}{\epsilon}
					$$`
					If `$f$` is a function of `$n$` variables `$x_1,\ldots,x_n$`, then
					`$$
						\begin{array}{l}
						D_i\, f(a_1,\ldots,a_n) =\\
						\displaystyle\qquad\lim_{\epsilon\rightarrow 0}\frac{f(a_1,\ldots,a_i+\epsilon,\ldots,a_n) - f(a_1,\ldots,a_i,\ldots,a_n)}{\epsilon}
						\end{array}
					$$`
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## Symbolic Differentiation
					Consider expressions over free variables `$x_1,\ldots,x_n$`
					`$$
						\begin{array}{l|l}
						D_i a = 0,\quad\textit{if}\ x_i\not\in a
						 & D_i x_i = 1\\
						D_i(a + b) = D_i a + D_i b
						 & D_i(a\cdot b) = D_i a\cdot b + a\cdot D_i b\\
						D_i(a^n) = n\cdot a^{n-1}\cdot D_i a
						 & D_i(f(a, b)) = D_a\, f\cdot D_i a\\
						D_i(e^a) = e^a\cdot D_i a
						 & \qquad {} + D_b\, f\cdot D_i b
						\end{array}
					$$`

					"Structural Induction"
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## Machine Learning: Gradient Descent

					* Approximate `$f:A\rightarrow B$` by finding parameter `$w$` for `$g:W\times A\rightarrow B$`
					* Train on examples `$(a, f(a))$`; define loss function `$L(w) = ||\,f(a) - g(w, a)||$`
					* Use `$\nabla L$` to improve `$w_0$` to `$w_0-r\cdot\nabla L(w_0)$`. Repeat.
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## Approaches to Gradient Computation

					* Manual differentiation
					* Numerical differentiation
					* Symbolic differentiation
					* Automatic differentiation
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## Manual or Symbolic Differentiation

					Consider `$f(x) = m_4$`, where `$m_1=x$` and `$m_{n+1}=4m_n(1 - m_n)$`
					("truncated logistic map" example from Baydin, *et al.*):

					`$f(x)=64x(1-x)(1-2x)^2(1-8x+8x^2)^2$`, so
					`$f'(x)=128x(1-x)(1-2x)^2(1-8x+8x^2)(-8+16x) + \ldots$`

					Needs a closed form, and leads to "Expression Swell"
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## Numerical Differentiation

					```haskell
f :: Double -> Double
f x = m 4 where
  m 1 = x
  m n = let mn1 = m (n - 1) in 4 * mn1 * (1 - mn1)

f' :: Double -> Double
f' x = let eps = 0.000001
	     in (f (x + eps) - f x) / eps

> f' 0.25
7.999951999848598
					```

					"Cardinal Sins of Numerical Analysis":
					* adding a small number to a big number
					* subtracting nearly equal numbers
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## Automatic Differentiation with Dual Numbers

					`$x = a + b\varepsilon$`, where `$\varepsilon > 0$` but `$\varepsilon^2 = 0$`

					(Compare to `$x = a + bi$`, where `$i^2 = -1$`)

					Calculate value and derivative simultaneously
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## Dual Number Examples
					`$$
						\begin{array}{l}
						(a_1+b_1\varepsilon) + (a_2+b_2\varepsilon) = (a_1+a_2)+(b_1+b_2)\varepsilon\\
						(a_1+b_1\varepsilon) \cdot (a_2+b_2\varepsilon) = 
							a_1\cdot a_2+(a_1\cdot b_2+a_2\cdot b_1)\varepsilon\\
						(a+b\varepsilon)^n = a^n + (n\cdot a^{n-1}\cdot b)\varepsilon\\
						e^{a+b\varepsilon} = e^a + (e^a\cdot b)\varepsilon\\
						f(a+b\varepsilon) = f(a) + (f'(a)\cdot b)\varepsilon
						\end{array}
					$$`
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## Logistic Map Revisited

					```haskell
data Dual = Dual Double Double deriving (Read, Show, Eq)

instance Num Dual where
  (+) (Dual a1 b1) (Dual a2 b2) = Dual (a1 + a2) (b1 + b2)
  (*) (Dual a1 b1) (Dual a2 b2)
    = Dual (a1 * a2) (a2 * b1 + a1 * b2)
  ...

f :: Dual -> Dual
f x = m 4 where
  m 1 = x
  m n = let mn1 = m (n - 1) in 4 * mn1 * (1 - mn1)

> f (Dual 0.25 1)
Dual 0.75 8.0
					```
					</textarea>
				</section>
				<section data-markdown>
					<textarea data-template>
					## Forward vs Backward AD

					* Dual numbers give forward AD
					* If `$f:\Bbb{R}^n\rightarrow\Bbb{R}$`, then forward AD is `$O(n^2)$`
					* Backward AD uses X to make this `$O(n)$`, where X is one or more of:
					   - traces
					   - continuations
					   - sharing
					   - matrix transpose
					   - category theory
					   - ...
					</textarea>
				</section>
			</div>
		</div>

		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true },
					{ src: 'plugin/math/math.js', async: true }
				]
			});
		</script>
	</body>
</html>
